<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Installation</title>
  <meta name="description" content="Installing Apache Distill">

  <link rel="stylesheet" type="text/css" href="/semantic/dist/semantic.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="/semantic/dist/semantic.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="/js/main.js"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://flagon.incubator.apache.org/docs/distill/">
  <link rel="alternate" type="application/rss+xml" title="Apache Flagon" href="/feed.xml">

  
</head>


  <body>

    <div class="site-header">
  <div id="main-menu" class="ui inverted padded fixed top borderless menu">
    <a class="site-title" href="/">
      <h3 class="ui inverted header item">Apache Flagon</h3>
    </a>

    <div class="right menu">
      <div class="ui dropdown item">
        Components
        <div class="menu">
          <a class="item" href="/stack">Stack</a>
          <a class="item" href="/userale">UserALE</a>
          <a class="item" href="/distill">Distill</a>
          <a class="item" href="/tap">Tap</a>
          <a class="item" href="/stout">Stout</a>
        </div>
      </div>
      <div class="ui dropdown item">
        <a href="/docs">Docs</a>
        <div class="menu">
          <a class="item" href="/docs/stack">Stack</a>
          <a class="item" href="/docs/userale">UserALE</a>
          <a class="item" href="/docs/useralejs">UserALE.js</a>
          <a class="item" href="/docs/useralepy">UserALE.py</a>
          <a class="item" href="/docs/distill">Distill</a>
          <a class="item" href="/docs/tap">Tap</a>
          <a class="item" href="/docs/stout">Stout</a>
        </div>
      </div>
      <a class="item" href="/releases">Releases</a>
      <a class="item" href="/community">Community</a>
    </div>
  </div>
</div>


    <div class="main-wrapper">
      <div class="docs-wrapper">
  <div class="docs-sidebar">
    








<!-- <div class="ui inverted list">
  <a class="item" href="/docs">About the Docs</a>
</div> -->
<div id="docs-nav" class="ui inverted accordion">
  
    <div class="title">
  
    <i class="dropdown icon"></i>
    Apache Flagon
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/">About the Docs</a>
      
        <a class="item" href="/docs/contributing/">Contributing</a>
      
    </div>
  </div>


  
    <div class="title">
  
    <i class="dropdown icon"></i>
    Stack
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/stack/">Getting Started</a>
      
        <a class="item" href="/docs/stack/scaling/">Scaling Considerations</a>
      
    </div>
  </div>

  
    <div class="title">
  
    <i class="dropdown icon"></i>
    UserALE
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/userale/">About UserALE</a>
      
    </div>
  </div>

  
    <div class="title">
  
    <i class="dropdown icon"></i>
    UserALE.js
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/useralejs/">Getting Started</a>
      
        <a class="item" href="/docs/useralejs/build.html">UserALE.js Build and Test</a>
      
        <a class="item" href="/docs/useralejs/API.html">UserALE.js API</a>
      
        <a class="item" href="/docs/useralejs/modifying.html">Modifying UserALE.js</a>
      
        <a class="item" href="/docs/useralejs/dataschema.html">UserALE.js Data Schema</a>
      
        <a class="item" href="/docs/useralejs/troubleshooting.html">Troubleshooting</a>
      
    </div>
  </div>

  
    <div class="title">
  
    <i class="dropdown icon"></i>
    UserALE.py
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/useralepy/">Installation</a>
      
        <a class="item" href="/docs/useralepy/start.html">Getting Started</a>
      
        <a class="item" href="/docs/useralepy/api.html">API Documentation</a>
      
        <a class="item" href="/docs/useralepy/changelog.html">Changelog</a>
      
    </div>
  </div>

  
    <div class="active title">
  
    <i class="dropdown icon"></i>
    Distill
  </div>
  
    <div class="active content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/distill/">Installation</a>
      
        <a class="item" href="/docs/distill/start.html">Getting Started</a>
      
        <a class="item" href="/docs/distill/api.html">API Documentation</a>
      
        <a class="item" href="/docs/distill/analytics.html">Apache Distill Analytics</a>
      
        <a class="item" href="/docs/distill/http.html">Apache Distill HTTP Client</a>
      
        <a class="item" href="/docs/distill/models.html">Apache Distill Models</a>
      
        <a class="item" href="/docs/distill/utilities.html">Apache Distill Utilities</a>
      
        <a class="item" href="/docs/distill/changelog.html">Changelog</a>
      
    </div>
  </div>

  
    <div class="title">
  
    <i class="dropdown icon"></i>
    Tap
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/tap/">Getting Started</a>
      
    </div>
  </div>

  
    <div class="title">
  
    <i class="dropdown icon"></i>
    Stout
  </div>
  
    <div class="content">
  
    <div class="ui inverted bulleted list docs-list">
      
        <a class="item" href="/docs/stout/">About Stout</a>
      
        <a class="item" href="/docs/stout/start.html">Getting Started</a>
      
    </div>
  </div>
</div>

  </div>
  <div class="docs-content">
    <h2 class="ui header">Installation</h2>
    <h3 id="installing-apache-distill">Installing Apache Distill</h3>

<p>The first step is to install Apache Distill. First, checkout the latest version of Apache Distill.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>git clone https://gitbox.apache.org/repos/asf/incubator-flagon-distill.git
</code></pre>
</div>

<p>Apache Distill is a python project, so it can be installed like any other python library. Several operating systems (Mac OS X, Major Versions of Linux/BSD) have Python pre-installed, so you should just have to run</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>easy_install distill
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>  or
</code></pre>
</div>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>pip install distill
</code></pre>
</div>

<p>Users are strongly recommended to install Apache Distill in a virtualenv. Instructions to setup an virtual environment will be explained below.</p>

<blockquote>
  <p><strong>Note</strong>
When the package is installed via easy_install or pip this function will be bound to the distill executable in the Python installation’s bin directory (on Windows - the Scripts directory).</p>
</blockquote>

<h3 id="installing-apache-distill-in-an-virtual-environment">Installing Apache Distill in an Virtual Environment</h3>

<p>virtualenv is a tool to create isolated Python environments. virtualenv creates a folder which contains all the necessary executables to use the packages that the Apache Distill project would need.</p>

<p>Install virtualenv via pip:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>sudo env/bin/pip install virtualenv
</code></pre>
</div>

<p>Start by changing directory into the root of Apache Distill’s project directory, and then use the virtualenv command-line tool to create a new environment:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>mkdir env
  <span class="nv">$ </span>virtualenv env
</code></pre>
</div>

<p>Activate environment:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span><span class="nb">source </span>env/bin/activate
</code></pre>
</div>

<p>Install Apache Distill requirements:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>env/bin/pip -r requirements.txt
</code></pre>
</div>

<p>To build the source code and run all unit tests.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>env/bin/python setup.py develop <span class="nb">test</span>
</code></pre>
</div>

<p>Launch local Apache Distill server, running on localhost:8090:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>env/bin/dev
</code></pre>
</div>

<p>Deactivate environment</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>deactivate
</code></pre>
</div>

<h3 id="running-apache-distill-on-docker-compose">Running Apache Distill on Docker Compose</h3>
<p>From the project directory, start up Apache Distill in the background.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>docker-compose up -d
  <span class="nv">$ </span>docker-compose ps
</code></pre>
</div>

<p>To stop services once you’ve finished with them:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>docker-compose stop
</code></pre>
</div>

<h3 id="deployment-with-nginx-and-gunicorn">Deployment with Nginx and Gunicorn</h3>

<p>I will describe a setup with nginx as a web server on Ubuntu. A web server cannot communicate directly with a Flask application such as Apache Distill. Thus gunicorn will be used to act as a medium between the web server and Apache Distill. Gunicorn is like an application web server that will be running behind nginx, and it is WSGI compatible. It can communicate with applications that support WSGI – Flask, Django, etc.</p>

<p>Install requirements.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>sudo apt-get update
  <span class="nv">$ </span>sudo apt-get install -y python python-pip nginx gunicorn
</code></pre>
</div>

<p>Create a directory to store the project.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>sudo mkdir /home/pubic_html <span class="o">&amp;&amp;</span> <span class="nb">cd</span> /home/public_html
</code></pre>
</div>

<p>Download the project from the GitHub repository and copy the application to the /home/public_html directory.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>git clone https://gitbox.apache.org/repos/asf/incubator-flagon-distill.git /home/public_html
</code></pre>
</div>

<p>Install Apache Distill’s requirements either globally or in a virutal environment:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>env/bin/pip install -r requirements.txt
</code></pre>
</div>

<p>Apache Distill has provided an nginx configuration file located in distill/deploy/nginx.conf.</p>

<p>Gunicorn will use port 8000 and handle the incoming HTTP requests.</p>

<p>Restart nginx to load the configuration changes.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>sudo /etc/init.d/nginx restart
</code></pre>
</div>

<p>Run gunicorn on port 8000.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>gunicorn --workers 4 --bind unix:distill.sock -m 007 deploy/run_server:app
</code></pre>
</div>

<p>Start a new browser instance and navigate to http://localhost.</p>

<h3 id="installing-documentation">Installing Documentation</h3>

<p>If you want to manually build the documentation, the instructions are below.</p>

<p>First, install the documentation dependencies:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>env/bin/pip install -r doc_requirements.txt
</code></pre>
</div>

<p>To build Apache Distill’s documentation, create a directory at the root level of /distill called distill-docs.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>mkdir distill-docs &amp; <span class="nb">cd </span>distill-docs
</code></pre>
</div>

<p>Execute build command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="c"># Inside top-level docs/ directory.</span>
  <span class="nv">$ </span>make html
</code></pre>
</div>

<p>This should build the documentation in your shell, and output HTML. At then end, it should say something about documents being ready in distill-docs/html. You can now open them in your browser by typing</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>  <span class="nv">$ </span>open distill-docs/html/index.html
</code></pre>
</div>

  </div>
</div>

    </div>

    <div class="footer ui inverted very padded vertical segment">
  <div class="ui vertical segment">
    <div class="ui four column grid">
      <div class="column">
        <h4 class="ui inverted header">About</h4>
        <div class="ui inverted link list">
          <a class="item" href="/stack">Stack</a>
          <a class="item" href="/userale">UserALE</a>
          <a class="item" href="/distill">Distill</a>
          <a class="item" href="/tap">Tap</a>
          <a class="item" href="/stout">Stout</a>
        </div>
      </div>
      <div class="column">
        <h4 class="ui inverted header">Docs</h4>
        <div class="ui inverted link list">
          <a class="item" href="/docs/stack">Stack</a>
          <a class="item" href="/docs/userale">UserALE</a>
          <a class="item" href="/docs/useralejs">UserAle.js</a>
          <a class="item" href="/docs/useralepy">UserAle.py</a>
          <a class="item" href="/docs/distill">Distill</a>
          <a class="item" href="/docs/tap">Tap</a>
          <a class="item" href="/docs/stout">Stout</a>
        </div>
      </div>
      <div class="column">
        <h4 class="ui inverted header">Community</h4>
        <div class="ui inverted link list">
          <a class="item" href="https://github.com/apache?q=flagon">GitHub</a>
          <a class="item" href="http://stackoverflow.com/questions/tagged/apache-flagon">StackOverflow</a>
          <a class="item" href="https://issues.apache.org/jira/browse/FLAGON">Jira Issue Tracker</a>
          <a class="item" href="https://cwiki.apache.org/confluence/display/FLAGON">Project Wiki</a>
          <a class="item" href="https://twitter.com/ApacheFlagon">Twitter</a>
        </div>
      </div>
      <div class="column">
        <h4 class="ui inverted header">Apache</h4>
        <div class="ui inverted link list">
          <a class="item" href="http://www.apache.org/">Apache Software Foundation</a>
          <a class="item" href="http://www.apache.org/licenses/">License</a>
          <a class="item" href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
          <a class="item" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
          <a class="item" href="http://www.apache.org/security/">Security</a>
        </div>
      </div>
    </div>
  </div>
  <div class="ui inverted vertical segment">
    <div class="ui two column middle aligned grid">
      <div class="column">
        Apache Flagon is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
      </div>
      <div class="center aligned column">
        Copyright &copy; 2019 The Apache Software Foundation, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br>
        Apache Flagon, Flagon, Apache, the Apache feather logo, the Apache Flagon logo and the Apache Incubator logo are trademarks of The Apache Software Foundation.
      </div>
    </div>
  </div>
  <div class="ui inverted vertical segment">
    <div class="ui one column middle aligned grid">
      <div class="center aligned column">
        <a href="http://incubator.apache.org/">
          <img src="/images/incubator-logo-white.jpg">
        </a>&nbsp;
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" alt="ASF Current Event">
        </a>
      </div>
    </div>
  </div>
</div>


  </body>

</html>
